<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MetaTune</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link
    href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@300;400;600;700&family=Share+Tech+Mono&family=Bebas+Neue&display=swap"
    rel="stylesheet" />
  <style>
    :root {
      --void: #03040a;
      --deep: #080b14;
      --panel: #111827;
      --border: #1a2540;
      --dna-green: #00ff88;
      --neural-amber: #ffb800;
      --quantum-magenta: #ff006e;
      --bio-cyan: #00d4ff;
      --evolution-purple: #9b5de5;
      --text-primary: #e8eef4;
      --text-secondary: #7a8ba0;
      --text-dim: #3d4f66;
      --font-display: "Bebas Neue", sans-serif;
      --font-tech: "Chakra Petch", sans-serif;
      --font-mono: "Share Tech Mono", monospace;
    }

    *,
    *::before,
    *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html,
    body {
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      background: #020617;
      color: var(--text-primary);
      font-family: var(--font-tech);
    }

    /* ── CANVAS ── */
    canvas#bg {
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      display: block;
      z-index: 0;
    }

    /* ── OVERLAYS ── */
    .vignette {
      position: fixed;
      inset: 0;
      pointer-events: none;
      background:
        radial-gradient(circle at top, rgba(0, 212, 255, 0.15) 0%, transparent 50%),
        radial-gradient(circle at bottom, rgba(255, 0, 110, 0.12) 0%, transparent 55%),
        radial-gradient(circle at center, transparent 0%, rgba(0, 0, 0, 0.75) 70%);
      z-index: 1;
    }

    .scanline {
      position: fixed;
      inset: 0;
      pointer-events: none;
      background: repeating-linear-gradient(to bottom,
          rgba(255, 255, 255, 0.05) 0px,
          rgba(255, 255, 255, 0.05) 1px,
          transparent 1px,
          transparent 3px);
      opacity: 0.1;
      z-index: 2;
    }

    .grain {
      position: fixed;
      inset: 0;
      pointer-events: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.2' numOctaves='3'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.28'/%3E%3C/svg%3E");
      mix-blend-mode: soft-light;
      opacity: 0.45;
      z-index: 3;
    }

    /* ── ROOT HUD — 3-row flex, strictly 100vh ── */
    .hud {
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      z-index: 5;
      pointer-events: none;
    }

    /* ── ROW 1: TOP BAR ── */
    .hud-top {
      flex: 0 0 auto;
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 16px;
      padding: clamp(12px, 2vh, 20px) clamp(16px, 3vw, 48px) 0;
    }

    .hud-tagline {
      font-family: var(--font-mono);
      font-size: clamp(7px, 0.9vw, 9px);
      letter-spacing: 0.35em;
      text-transform: uppercase;
      color: var(--dna-green);
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .hud-tagline .line {
      flex: 0 0 32px;
      height: 1px;
      background: linear-gradient(90deg, var(--dna-green), transparent);
      box-shadow: 0 0 8px rgba(0, 255, 136, 0.5);
    }

    .hud-scene-label {
      font-family: var(--font-mono);
      font-size: clamp(7px, 0.8vw, 9px);
      letter-spacing: 0.25em;
      color: var(--text-dim);
      text-transform: uppercase;
      margin: 6px 0 5px;
    }

    .hud-progress-shell {
      position: relative;
      width: 100%;
      height: 3px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      overflow: hidden;
    }

    .hud-progress-fill {
      position: absolute;
      inset: 0;
      width: 0%;
      background: linear-gradient(90deg, var(--quantum-magenta), var(--evolution-purple), var(--bio-cyan), var(--dna-green));
      background-size: 220% 100%;
      box-shadow: 0 0 10px rgba(255, 0, 110, 0.6), 0 0 20px rgba(0, 212, 255, 0.5);
      border-radius: inherit;
      animation: borderTrace 1.6s linear infinite;
    }

    .hud-pill {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      padding: 5px 12px;
      display: inline-flex;
      align-items: center;
      gap: 7px;
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.92), rgba(3, 7, 18, 0.96));
      font-family: var(--font-mono);
      font-size: clamp(7px, 0.8vw, 9px);
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--text-dim);
      white-space: nowrap;
    }

    .hud-pill-dot {
      width: 7px;
      height: 7px;
      border-radius: 50%;
      background: var(--dna-green);
      box-shadow: 0 0 6px rgba(0, 255, 136, 0.9), 0 0 14px rgba(0, 255, 136, 0.6);
      animation: heartbeat 1.8s infinite;
    }

    /* ── ROW 2: MAIN CONTENT (fills remaining space) ── */
    .hud-main {
      flex: 1 1 0;
      min-height: 0;
      display: flex;
      align-items: stretch;
      gap: clamp(12px, 2vw, 28px);
      padding: clamp(10px, 1.5vh, 18px) clamp(16px, 3vw, 48px) 0;
      overflow: hidden;
    }

    /* ── SCENE STACK ── */
    .scene-stack {
      position: relative;
      flex: 1 1 0;
      min-width: 0;
      min-height: 0;
      overflow: hidden;
    }

    .scene {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: clamp(12px, 2vw, 32px) clamp(8px, 1.5vw, 24px);
      opacity: 0;
      transform: translateY(12px);
      pointer-events: none;
      overflow: hidden;
    }

    .scene.active {
      opacity: 1;
      transform: translateY(0);
      transition: opacity 0.65s ease, transform 0.65s ease;
      pointer-events: auto;
    }

    .scene-heading-kicker {
      font-family: var(--font-mono);
      font-size: clamp(7px, 0.85vw, 9px);
      letter-spacing: 0.32em;
      text-transform: uppercase;
      color: var(--text-dim);
      margin-bottom: clamp(6px, 1vh, 12px);
    }

    .scene-heading-kicker .badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 3px 9px;
      margin-right: 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      font-size: clamp(6px, 0.75vw, 8px);
      letter-spacing: 0.24em;
      color: rgba(226, 232, 240, 0.9);
      background: radial-gradient(circle at top, rgba(148, 163, 184, 0.25), rgba(15, 23, 42, 0.94));
    }

    .scene-title {
      font-family: var(--font-display);
      font-size: clamp(28px, 4.5vw, 64px);
      letter-spacing: 0.1em;
      line-height: 0.95;
      text-transform: uppercase;
      color: var(--text-primary);
      margin-bottom: clamp(8px, 1.2vh, 16px);
    }

    .scene-title .accent {
      color: var(--dna-green);
      text-shadow: 0 0 16px rgba(0, 255, 136, 0.7), 0 0 32px rgba(0, 255, 136, 0.45);
    }

    .scene-title .danger {
      color: var(--quantum-magenta);
      text-shadow: 0 0 16px rgba(255, 0, 110, 0.75), 0 0 30px rgba(255, 0, 110, 0.6);
    }

    .scene-body {
      font-family: var(--font-tech);
      font-size: clamp(11px, 1.1vw, 13px);
      line-height: 1.75;
      color: var(--text-secondary);
      margin-bottom: clamp(8px, 1.2vh, 16px);
      max-width: 580px;
    }

    .scene-body strong {
      color: var(--text-primary);
    }

    .act-label {
      font-family: var(--font-mono);
      font-size: clamp(7px, 0.8vw, 9px);
      letter-spacing: 0.26em;
      text-transform: uppercase;
      color: var(--text-dim);
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: clamp(6px, 0.8vh, 10px);
    }

    .act-label .dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--bio-cyan);
      box-shadow: 0 0 6px rgba(0, 212, 255, 0.7), 0 0 12px rgba(0, 212, 255, 0.5);
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: clamp(5px, 0.6vw, 8px);
    }

    .chip {
      border-radius: 5px;
      border: 1px solid rgba(31, 41, 55, 0.9);
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.97), rgba(3, 7, 18, 0.96));
      padding: clamp(5px, 0.6vh, 8px) clamp(7px, 0.7vw, 10px);
      font-family: var(--font-mono);
      font-size: clamp(7px, 0.75vw, 9px);
      letter-spacing: 0.1em;
      color: rgba(209, 213, 219, 0.9);
      text-transform: uppercase;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
    }

    .chip .key {
      opacity: 0.65;
    }

    .chip .value {
      color: var(--dna-green);
    }

    /* ── COLD BOOT TERMINAL ── */
    .cold-boot-terminal {
      font-family: var(--font-mono);
      font-size: clamp(9px, 0.95vw, 11px);
      line-height: 1.65;
      color: rgba(148, 163, 184, 0.95);
      background: rgba(2, 6, 23, 0.92);
      border-radius: 8px;
      border: 1px solid rgba(30, 64, 175, 0.9);
      padding: clamp(10px, 1.2vh, 14px) clamp(12px, 1.2vw, 18px);
      width: min(520px, 100%);
      box-shadow: 0 0 0 1px rgba(15, 23, 42, 1), 0 16px 36px rgba(15, 23, 42, 0.9);
      overflow: hidden;
    }

    .cold-boot-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 7px;
      font-size: clamp(7px, 0.75vw, 9px);
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: rgba(156, 163, 175, 0.85);
    }

    .cold-boot-dots {
      display: inline-flex;
      gap: 4px;
    }

    .cold-boot-dots span {
      width: 5px;
      height: 5px;
      border-radius: 50%;
      background: rgba(51, 65, 85, 0.9);
    }

    .cold-boot-body {
      border-top: 1px solid rgba(30, 64, 175, 0.7);
      padding-top: 7px;
      overflow: hidden;
    }

    .cold-line {
      white-space: nowrap;
      opacity: 0;
      transform: translateY(3px);
    }

    .cold-line.visible {
      opacity: 1;
      transform: translateY(0);
      transition: opacity 0.2s ease, transform 0.2s ease;
    }

    .cold-prompt {
      color: #4ade80;
    }

    .cold-module {
      color: #38bdf8;
    }

    .cold-ok {
      color: #22c55e;
    }

    .cold-meta {
      color: #a855f7;
    }

    /* ── RIGHT META PANEL ── */
    .right-meta {
      flex: 0 0 clamp(180px, 22vw, 260px);
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: clamp(8px, 1vh, 14px);
      min-height: 0;
      overflow: hidden;
    }

    .act-timeline {
      display: flex;
      align-items: center;
      gap: 10px;
      font-family: var(--font-mono);
      font-size: clamp(7px, 0.75vw, 9px);
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--text-dim);
    }

    .act-pill {
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(30, 64, 175, 0.8);
      background: linear-gradient(135deg, rgba(30, 64, 175, 0.9), rgba(15, 23, 42, 0.98));
      color: rgba(226, 232, 240, 0.9);
      font-size: clamp(6px, 0.7vw, 8px);
      white-space: nowrap;
    }

    .act-stepper {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .act-step {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      border: 1px solid rgba(75, 85, 99, 0.85);
      position: relative;
      opacity: 0.55;
    }

    .act-step::after {
      content: "";
      position: absolute;
      inset: 2px;
      border-radius: inherit;
      background: rgba(148, 163, 184, 0.4);
    }

    .act-step.active {
      border-color: var(--quantum-magenta);
      opacity: 1;
    }

    .act-step.active::after {
      background: radial-gradient(circle, var(--quantum-magenta), transparent);
      box-shadow: 0 0 8px rgba(255, 0, 110, 0.8), 0 0 16px rgba(255, 0, 110, 0.6);
    }

    .stat-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: clamp(5px, 0.6vw, 8px);
      width: 100%;
    }

    .stat-card {
      border-radius: 8px;
      border: 1px solid rgba(15, 23, 42, 0.9);
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.98), rgba(3, 7, 18, 0.99));
      padding: clamp(8px, 0.9vh, 12px) clamp(8px, 0.8vw, 12px);
      overflow: hidden;
    }

    .stat-label {
      font-family: var(--font-mono);
      font-size: clamp(6px, 0.7vw, 8px);
      letter-spacing: 0.22em;
      text-transform: uppercase;
      color: var(--text-dim);
      margin-bottom: 4px;
    }

    .stat-value {
      font-family: var(--font-display);
      font-size: clamp(18px, 2.2vw, 26px);
      letter-spacing: 0.12em;
      color: var(--dna-green);
      text-shadow: 0 0 16px rgba(0, 255, 136, 0.75), 0 0 32px rgba(0, 255, 136, 0.5);
    }

    .stat-tag {
      margin-top: 3px;
      font-family: var(--font-mono);
      font-size: clamp(5px, 0.6vw, 7px);
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: rgba(148, 163, 184, 0.7);
    }

    .logo-lockup {
      text-align: right;
    }

    .logo-main {
      font-family: var(--font-display);
      font-size: clamp(20px, 2.8vw, 34px);
      letter-spacing: 0.28em;
      text-transform: uppercase;
      color: var(--text-primary);
    }

    .logo-main span {
      color: var(--dna-green);
      text-shadow: 0 0 20px rgba(0, 255, 136, 0.85), 0 0 36px rgba(0, 255, 136, 0.55);
    }

    .logo-sub {
      font-family: var(--font-mono);
      margin-top: 3px;
      font-size: clamp(5px, 0.65vw, 7px);
      letter-spacing: 0.24em;
      color: var(--text-dim);
      text-transform: uppercase;
    }

    /* ── ROW 3: CONTROLS FOOTER ── */
    .hud-footer {
      flex: 0 0 auto;
      pointer-events: auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: clamp(10px, 1.5vh, 18px) clamp(16px, 3vw, 48px) clamp(14px, 2vh, 24px);
      gap: 16px;
    }

    /* Stepper legend at footer left */
    .footer-seq {
      display: flex;
      align-items: center;
      gap: 10px;
      font-family: var(--font-mono);
      font-size: clamp(7px, 0.8vw, 9px);
      letter-spacing: 0.2em;
      color: var(--text-dim);
      text-transform: uppercase;
    }

    /* ── BUTTONS ── */
    .btn-ghost {
      pointer-events: auto;
      padding: 7px 14px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.95), rgba(3, 7, 18, 0.97));
      color: rgba(249, 250, 251, 0.75);
      font-family: var(--font-mono);
      font-size: clamp(7px, 0.8vw, 9px);
      letter-spacing: 0.22em;
      text-transform: uppercase;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 7px;
      opacity: 0.75;
      transition: opacity 0.2s, transform 0.2s, box-shadow 0.2s;
    }

    .btn-ghost:hover {
      opacity: 1;
      transform: translateY(-1px);
      box-shadow: 0 0 14px rgba(148, 163, 184, 0.5);
    }

    .btn-primary {
      pointer-events: auto;
      padding: clamp(10px, 1.2vh, 14px) clamp(20px, 2.5vw, 32px);
      border: none;
      clip-path: polygon(0 0, calc(100% - 12px) 0, 100% 12px, 100% 100%, 0 100%);
      background: linear-gradient(100deg, var(--quantum-magenta) 0%, #9b00ff 35%, var(--bio-cyan) 68%, var(--dna-green) 100%);
      background-size: 220% 100%;
      color: var(--text-primary);
      font-family: var(--font-mono);
      font-size: clamp(9px, 1vw, 11px);
      letter-spacing: 0.3em;
      text-transform: uppercase;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      box-shadow: 0 0 16px rgba(255, 0, 110, 0.7), 0 0 32px rgba(0, 212, 255, 0.6);
      animation: ignitePulse 2.6s ease-in-out infinite;
      white-space: nowrap;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 0 24px rgba(255, 0, 110, 0.9), 0 0 48px rgba(0, 212, 255, 0.75);
    }

    .btn-primary:active {
      transform: translateY(0);
    }

    /* ── FADE OUT ── */
    .fade-out {
      position: fixed;
      inset: 0;
      background: #000;
      opacity: 0;
      pointer-events: none;
      z-index: 20;
      transition: opacity 0.9s ease;
    }

    .fade-out.active {
      opacity: 1;
      pointer-events: auto;
    }

    /* ── GLITCH ── */
    .glitch {
      position: relative;
    }

    .glitch::before,
    .glitch::after {
      content: attr(data-text);
      position: absolute;
      inset: 0;
      mix-blend-mode: screen;
      opacity: 0;
    }

    .glitch::before {
      color: var(--quantum-magenta);
      transform: translate(-2px, 0);
    }

    .glitch::after {
      color: var(--bio-cyan);
      transform: translate(2px, 0);
    }

    .glitch.glitching::before,
    .glitch.glitching::after {
      animation: glitchSlices 0.28s steps(2, end) forwards;
    }

    /* ── KEYFRAMES ── */
    @keyframes heartbeat {

      0%,
      100% {
        transform: scale(1);
      }

      14% {
        transform: scale(1.3);
      }

      28% {
        transform: scale(1);
      }

      42% {
        transform: scale(1.22);
      }
    }

    @keyframes ignitePulse {

      0%,
      100% {
        box-shadow: 0 0 16px rgba(255, 0, 110, 0.65), 0 0 36px rgba(155, 0, 255, 0.35);
        background-position: 0% 50%;
      }

      50% {
        box-shadow: 0 0 28px rgba(255, 0, 110, 0.92), 0 0 60px rgba(0, 212, 255, 0.7);
        background-position: 100% 50%;
      }
    }

    @keyframes borderTrace {
      0% {
        background-position: 0% 0%;
      }

      100% {
        background-position: 200% 0%;
      }
    }

    @keyframes glitchSlices {
      0% {
        opacity: 0;
        clip-path: inset(0 0 0 0);
      }

      20% {
        opacity: 1;
        clip-path: inset(8% 0 50% 0);
      }

      40% {
        clip-path: inset(60% 0 18% 0);
      }

      60% {
        clip-path: inset(30% 0 40% 0);
      }

      80% {
        clip-path: inset(70% 0 10% 0);
      }

      100% {
        opacity: 0;
        clip-path: inset(0 0 0 0);
      }
    }

    /* ── RESPONSIVE ── */
    @media (max-width: 700px) {
      .right-meta {
        display: none;
      }

      .scene-title {
        font-size: clamp(26px, 7vw, 44px);
      }
    }

    @media (max-height: 600px) {
      .stat-grid {
        display: none;
      }

      .scene-body {
        font-size: 11px;
      }
    }
  </style>
</head>

<body>
  <canvas id="bg"></canvas>
  <div class="vignette"></div>
  <div class="scanline"></div>
  <div class="grain"></div>

  <!-- ROOT LAYOUT -->
  <div class="hud">

    <!-- ROW 1: TOP BAR -->
    <div class="hud-top">
      <div style="flex:1; min-width:0;">
        <div class="hud-tagline">
          <span class="line"></span>
          <span>META-OPTIMIZATION WORKSPACE</span>
        </div>
        <div id="hud-scene" class="hud-scene-label">ACT 0 · COLD BOOT</div>
        <div class="hud-progress-shell">
          <div id="progress-bar" class="hud-progress-fill"></div>
        </div>
      </div>
      <div class="hud-pill" style="flex:0 0 auto;">
        <span class="hud-pill-dot"></span>
        <span>SESSION · MT-PRIME</span>
      </div>
    </div>

    <!-- ROW 2: MAIN CONTENT -->
    <div class="hud-main">

      <!-- SCENE STACK -->
      <div class="scene-stack">

        <!-- ACT 0: COLD BOOT -->
        <section id="scene-0" class="scene active">
          <div class="scene-heading-kicker">
            <span class="badge">ACT 0</span>BOOT SEQUENCE
          </div>
          <div class="cold-boot-terminal">
            <div class="cold-boot-header">
              <span>META-TUNE · DIAGNOSTIC SHELL</span>
              <span class="cold-boot-dots"><span></span><span></span><span></span></span>
            </div>
            <div class="cold-boot-body" id="cold-body">
              <div class="cold-line"><span class="cold-prompt">mt@workspace</span>:~$ boot --cold --session PRIME</div>
              <div class="cold-line">&gt; initializing <span class="cold-module">dataset_analyzer</span> ... <span
                  class="cold-ok">ok</span></div>
              <div class="cold-line">&gt; initializing <span class="cold-module">advanced_metanet.brain</span> ... <span
                  class="cold-ok">ok</span></div>
              <div class="cold-line">&gt; initializing <span class="cold-module">bilevel_evolution_engine</span> ...
                <span class="cold-ok">ok</span>
              </div>
              <div class="cold-line">&gt; binding <span class="cold-module">vizier.optimizer_layer</span> ... <span
                  class="cold-ok">ok</span></div>
              <div class="cold-line">&gt; loading <span class="cold-meta">meta_prior / human_runs ∼ 2.1e6</span> ...
                <span class="cold-ok">ok</span>
              </div>
              <div class="cold-line">&gt; routing <span class="cold-module">/data/&lt;your_dataset.csv&gt;</span> →
                MetaTune</div>
              <div class="cold-line">READY · &gt;_&nbsp; waiting for dataset drop...</div>
            </div>
          </div>
        </section>

        <!-- ACT 1: THE PROBLEM -->
        <section id="scene-1" class="scene">
          <div class="scene-heading-kicker"><span class="badge">ACT 1</span>THE PROBLEM</div>
          <h1 class="scene-title glitch" data-text="MILLIONS OF HOURS WASTED GUESSING.">
            MILLIONS OF HOURS<br><span class="danger">WASTED GUESSING.</span>
          </h1>
          <div class="scene-body">
            Every ML team is still doing it the old way: trial‑and‑error grid searches,
            copy‑pasted configs, hyperparameters tuned by <strong>"vibes"</strong>.
            <br><br>
            <strong>MetaTune</strong> exists for one reason: to turn that chaos into a
            repeatable, programmable optimization pipeline that learns from every dataset it touches.
          </div>
          <div class="act-label"><span class="dot"></span>PROBLEM STATEMENT · HUMAN TIME SINK</div>
          <div class="grid">
            <div class="chip"><span class="key">SEARCH BUDGET</span><span class="value">10³‑10⁵ TRIALS</span></div>
            <div class="chip"><span class="key">ENGINEER HOURS</span><span class="value">&gt; 2M / YEAR</span></div>
            <div class="chip"><span class="key">REPEATABILITY</span><span class="value">LOW</span></div>
            <div class="chip"><span class="key">PRIOR KNOWLEDGE</span><span class="value">LOST</span></div>
          </div>
        </section>

        <!-- ACT 2: DATASET DNA -->
        <section id="scene-2" class="scene">
          <div class="scene-heading-kicker"><span class="badge">ACT 2</span>PHASE 01 · DATASET DNA</div>
          <h1 class="scene-title">WE READ YOUR<br><span class="accent">DATASET DNA.</span></h1>
          <div class="scene-body">
            Before MetaTune touches a single hyperparameter, it runs your dataset through
            a forensic scan: <strong>17 meta‑features</strong> that quantify shape, balance,
            entropy, and brittleness.<br><br>
            This is your dataset's genome — the signal driving every downstream decision.
          </div>
          <div class="act-label"><span class="dot"></span>PHASE 01 · GENOME SEQUENCING</div>
          <div class="grid">
            <div class="chip"><span class="key">TARGET ENTROPY</span><span class="value">H(y)</span></div>
            <div class="chip"><span class="key">CLASS IMBALANCE</span><span class="value">ρ</span></div>
            <div class="chip"><span class="key">SPARSITY</span><span class="value">σ</span></div>
            <div class="chip"><span class="key">DIMENSIONALITY</span><span class="value">d / n</span></div>
            <div class="chip"><span class="key">TASK TYPE</span><span class="value">CLS / REG</span></div>
            <div class="chip"><span class="key">DIFFICULTY INDEX</span><span class="value">Ω</span></div>
          </div>
        </section>

        <!-- ACT 3: NEURAL BRAIN -->
        <section id="scene-3" class="scene">
          <div class="scene-heading-kicker"><span class="badge">ACT 3</span>PHASE 02 · NEURAL PRESCRIPTION</div>
          <h1 class="scene-title">A NEURAL <span class="accent">BRAIN</span><br>DECIDES WHAT TO TRY.</h1>
          <div class="scene-body">
            The Dataset DNA feeds into an internal meta‑network — the <strong>MetaTune brain</strong>.
            Trained across thousands of prior runs, it maps DNA patterns to optimizers,
            architectures, and learning‑rate schedules that actually work.<br><br>
            The output is not a random grid. It's a <strong>prescription</strong>.
          </div>
          <div class="act-label">
            <span class="dot" style="background:var(--neural-amber);box-shadow:0 0 8px rgba(255,184,0,0.75);"></span>
            PHASE 02 · META-BRAIN INFERENCE
          </div>
          <div class="grid">
            <div class="chip"><span class="key">OPTIMIZER</span><span class="value">ADAM / LAMB / SGD</span></div>
            <div class="chip"><span class="key">LR BAND</span><span class="value">[1e‑5, 1e‑1]</span></div>
            <div class="chip"><span class="key">REGIME</span><span class="value">SMALL / LARGE / TABULAR</span></div>
            <div class="chip"><span class="key">MODEL FAMILY</span><span class="value">TREE / LINEAR / NN</span></div>
          </div>
        </section>

        <!-- ACT 4: BILEVEL EVOLUTION -->
        <section id="scene-4" class="scene">
          <div class="scene-heading-kicker"><span class="badge">ACT 4</span>PHASE 03 · BILEVEL EVOLUTION ENGINE</div>
          <h1 class="scene-title">A BILEVEL <span class="accent">EVOLUTION ENGINE</span><br>DOES THE BRUTAL WORK.</h1>
          <div class="scene-body">
            Under the hood, MetaTune runs a bilevel optimization loop: an outer search over
            hyperparameters, an inner loop over model training.<br><br>
            The engine adjusts regularization, learning rate, and architecture on the fly,
            guided by validation curvature — <strong>not</strong> guesswork.
          </div>
          <div class="act-label">
            <span class="dot"
              style="background:var(--evolution-purple);box-shadow:0 0 8px rgba(155,93,229,0.8);"></span>
            PHASE 03 · INITIALIZE → TUNE → USE_BEST
          </div>
          <div class="grid">
            <div class="chip"><span class="key">INITIALIZE</span><span class="value">PRIOR-AWARE</span></div>
            <div class="chip"><span class="key">TUNE</span><span class="value">BILEVEL LOOP</span></div>
            <div class="chip"><span class="key">MONITOR</span><span class="value">ADAPTIVE</span></div>
            <div class="chip"><span class="key">USE_BEST</span><span class="value">PACKAGED</span></div>
          </div>
        </section>

        <!-- ACT 5: REVEAL -->
        <section id="scene-5" class="scene">
          <div class="scene-heading-kicker"><span class="badge">ACT 5</span>THE REVEAL · METATUNE</div>
          <h1 class="scene-title">WELCOME TO<br><span class="accent">METATUNE.</span></h1>
          <div class="scene-body">
            You're not launching another toy dashboard. You're stepping into a
            <strong>cinematic workspace</strong> for bilevel optimization:
            Dataset DNA on the left, Neural Brain prescriptions in the middle,
            Evolution Engine live‑telemetry on the right.<br><br>
            Press <strong>ENTER WORKSPACE</strong> below to drop your dataset and let
            MetaTune take the first shot for you.
          </div>
        </section>
      </div>

      <!-- RIGHT META PANEL -->
      <aside class="right-meta">
        <div class="act-label" style="justify-content:flex-end;">
          <span class="dot"></span><span>SEQUENCE</span>
        </div>
        <div class="act-timeline">
          <div class="act-pill">AUTO‑ADVANCING</div>
          <div class="act-stepper">
            <div class="act-step active" data-step="0"></div>
            <div class="act-step" data-step="1"></div>
            <div class="act-step" data-step="2"></div>
            <div class="act-step" data-step="3"></div>
            <div class="act-step" data-step="4"></div>
            <div class="act-step" data-step="5"></div>
          </div>
        </div>

        <div class="stat-grid">
          <div class="stat-card">
            <div class="stat-label">PRIOR RUNS SEEN</div>
            <div class="stat-value">2.1M</div>
            <div class="stat-tag">META-KNOWLEDGE BASE</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">DNA FEATURES</div>
            <div class="stat-value">17</div>
            <div class="stat-tag">DATASET GENOME</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">SEARCH SPEEDUP</div>
            <div class="stat-value">×35</div>
            <div class="stat-tag">VS NAIVE TUNING</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">HOURS SAVED</div>
            <div class="stat-value">∞</div>
            <div class="stat-tag">IF YOU LET IT</div>
          </div>
        </div>

        <div class="logo-lockup">
          <div class="logo-main">META<span>TUNE</span></div>
          <div class="logo-sub">BILEVEL OPTIMIZATION WORKSPACE</div>
        </div>
      </aside>
    </div>

    <!-- ROW 3: FOOTER / CONTROLS -->
    <div class="hud-footer">
      <div class="footer-seq">
        <span>ACT</span>
        <div class="act-stepper" id="footer-steps">
          <div class="act-step active" data-fstep="0"></div>
          <div class="act-step" data-fstep="1"></div>
          <div class="act-step" data-fstep="2"></div>
          <div class="act-step" data-fstep="3"></div>
          <div class="act-step" data-fstep="4"></div>
          <div class="act-step" data-fstep="5"></div>
        </div>
        <span id="footer-act-label">COLD BOOT</span>
      </div>

      <div style="display:flex;gap:10px;align-items:center;">
        <button class="btn-ghost" type="button" onclick="skipIntro()">
          SKIP <span style="opacity:0.6;font-size:8px;letter-spacing:0.2em;">ESC</span>
        </button>
        <button class="btn-primary" type="button" onclick="enterApp()">
          ENTER WORKSPACE <span>⌬</span>
        </button>
      </div>
    </div>
  </div>

  <div id="fade-out" class="fade-out"></div>

  <script>
    /* ── CANVAS PARTICLES ── */
    const canvas = document.getElementById('bg');
    const ctx = canvas.getContext('2d');
    let W = 0, H = 0;

    function resizeCanvas() {
      W = canvas.width = window.innerWidth;
      H = canvas.height = window.innerHeight;
    }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    class Particle {
      constructor() { this.reset(true); }
      reset(init = false) {
        this.x = Math.random() * W;
        this.y = Math.random() * H;
        this.z = 0.2 + Math.random() * 0.8;
        this.vx = -0.12 - Math.random() * 0.35;
        this.vy = (Math.random() - 0.5) * 0.12;
        this.alpha = init ? 0 : 0.2 + Math.random() * 0.55;
      }
      step() {
        this.x += this.vx * (0.5 + this.z);
        this.y += this.vy * (0.5 + this.z);
        if (this.x < -40 || this.y < -40 || this.y > H + 40) {
          this.reset(); this.x = W + 20; this.y = Math.random() * H;
        }
      }
      draw(c) {
        const g = c.createRadialGradient(this.x, this.y, 0, this.x, this.y, 28 * this.z);
        g.addColorStop(0, `rgba(0,212,255,${0.5 * this.alpha})`);
        g.addColorStop(0.4, `rgba(0,255,136,${0.28 * this.alpha})`);
        g.addColorStop(1, 'rgba(0,0,0,0)');
        c.fillStyle = g;
        c.beginPath();
        c.arc(this.x, this.y, 28 * this.z, 0, Math.PI * 2);
        c.fill();
      }
    }

    const particles = Array.from({ length: 80 }, () => new Particle());
    function animate() {
      ctx.clearRect(0, 0, W, H);
      ctx.fillStyle = '#020617';
      ctx.fillRect(0, 0, W, H);
      particles.forEach(p => { p.step(); p.draw(ctx); });
      requestAnimationFrame(animate);
    }
    animate();

    /* ── SCENE TIMELINE ── */
    const scenes = [
      { id: 'scene-0', name: 'ACT 0 · COLD BOOT', label: 'COLD BOOT', dur: 2.8 },
      { id: 'scene-1', name: 'ACT 1 · THE PROBLEM', label: 'THE PROBLEM', dur: 4.5 },
      { id: 'scene-2', name: 'ACT 2 · DATASET DNA', label: 'DATASET DNA', dur: 5.0 },
      { id: 'scene-3', name: 'ACT 3 · NEURAL PRESCRIPTION', label: 'NEURAL BRAIN', dur: 5.2 },
      { id: 'scene-4', name: 'ACT 4 · BILEVEL EVOLUTION', label: 'EVOLUTION', dur: 5.2 },
      { id: 'scene-5', name: 'ACT 5 · METATUNE', label: 'METATUNE', dur: Infinity },
    ];

    let currentScene = 0;
    let started = false;
    let elapsed = 0;
    let lastTs = null;

    const progressBar = document.getElementById('progress-bar');
    const hudScene = document.getElementById('hud-scene');
    const sideSteps = Array.from(document.querySelectorAll('.act-step[data-step]'));
    const footerSteps = Array.from(document.querySelectorAll('[data-fstep]'));
    const footerLabel = document.getElementById('footer-act-label');
    const coldLines = Array.from(document.querySelectorAll('.cold-line'));
    let coldIndex = 0;

    const totalFinite = scenes.reduce((a, s) => a + (isFinite(s.dur) ? s.dur : 0), 0);

    function showScene(idx) {
      scenes.forEach((s, i) => {
        const el = document.getElementById(s.id);
        if (!el) return;
        el.classList.toggle('active', i === idx);
      });
      sideSteps.forEach(el => el.classList.toggle('active', Number(el.dataset.step) === idx));
      footerSteps.forEach(el => el.classList.toggle('active', Number(el.dataset.fstep) === idx));
      hudScene.textContent = scenes[idx].name;
      footerLabel.textContent = scenes[idx].label;

      // Trigger glitch on scene title
      const titleEl = document.querySelector(`#${scenes[idx].id} .glitch`);
      if (titleEl) {
        titleEl.classList.remove('glitching');
        void titleEl.offsetWidth;
        titleEl.classList.add('glitching');
      }
    }

    function startColdBoot() {
      let ci = 0;
      const iv = setInterval(() => {
        if (ci >= coldLines.length) { clearInterval(iv); return; }
        coldLines[ci++].classList.add('visible');
      }, 160);
    }

    function tick(ts) {
      if (lastTs === null) lastTs = ts;
      const dt = (ts - lastTs) / 1000;
      lastTs = ts;

      const cur = scenes[currentScene];
      if (isFinite(cur.dur)) {
        elapsed += dt;
        if (elapsed >= cur.dur && currentScene < scenes.length - 1) {
          elapsed = 0;
          currentScene++;
          showScene(currentScene);
        }
      }

      // Progress bar calculation
      const safeIdx = Math.min(currentScene, scenes.length - 2);
      const sumBefore = scenes.slice(0, safeIdx).reduce((a, s) => a + (isFinite(s.dur) ? s.dur : 0), 0);
      const curDur = scenes[safeIdx].dur;
      const span = isFinite(curDur) && totalFinite > 0 ? curDur / totalFinite : 0;
      const base = totalFinite > 0 ? sumBefore / totalFinite : 0;
      const local = isFinite(curDur) && curDur > 0 ? Math.min(elapsed / curDur, 1) : 1;
      const pct = Math.min(1, base + span * local);
      progressBar.style.width = `${Math.min(100, pct * 100)}%`;

      requestAnimationFrame(tick);
    }

    function startTimeline() {
      if (started) return;
      started = true;
      showScene(0);
      startColdBoot();
      requestAnimationFrame(tick);
    }

    // Auto-start after 400ms
    window.addEventListener('load', () => setTimeout(startTimeline, 400));
    window.addEventListener('click', startTimeline, { once: true });
    window.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') startTimeline();
    }, { once: true });

    /* ── STREAMLIT COMPONENT BRIDGE ── */
    // Must send componentReady first so Streamlit starts listening,
    // then setComponentValue to return "done" to Python.
    function _streamlitReady() {
      window.parent.postMessage({
        isStreamlitMessage: true,
        type: 'streamlit:componentReady',
        apiVersion: 1
      }, '*');
    }

    function _streamlitDone() {
      window.parent.postMessage({
        isStreamlitMessage: true,
        type: 'streamlit:setComponentValue',
        value: 'done',
        dataType: 'json'
      }, '*');
    }

    // Fallback path for environments where Streamlit component messages
    // are not delivered from a plain components.html iframe.
    function _navigateToWorkspaceInFrame() {
      window.location.href = '/?intro=done';
    }

    function _streamlitDoneWithRetry() {
      _streamlitReady();
      _streamlitDone();

      let attempts = 0;
      const iv = setInterval(() => {
        attempts += 1;
        _streamlitDone();
        if (attempts >= 6) clearInterval(iv);
      }, 180);

      // Hard fallback so the user always reaches the workspace.
      setTimeout(_navigateToWorkspaceInFrame, 500);
    }

    // Register component as ready as soon as the page loads
    window.addEventListener('load', _streamlitReady);

    /* ── ENTER APP ── */
    function enterApp() {
      const fd = document.getElementById('fade-out');
      fd.classList.add('active');
      progressBar.style.width = '100%';
      // Small delay for the fade to be visible, then notify Python
      setTimeout(() => {
        _streamlitDoneWithRetry();
      }, 700);
    }

    function skipIntro() {
      _streamlitDoneWithRetry();
    }

    // ESC key skip
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') skipIntro();
    });
  </script>
</body>

</html>
